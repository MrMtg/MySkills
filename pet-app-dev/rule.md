# 项目开发规范 (Project Development Rules)

> **版本**: v1.0.0
> **更新日期**: 2026-01-27
> **适用项目**: 宠物APP开发
> **技术栈**: uni-app x

本文档是**可迭代**的开发规范模板，随着项目推进持续更新。

---

## 📋 目录

1. [模块化开发机制](#一模块化开发机制)
2. [开发审查机制](#二开发审查机制)
3. [问题总结管理](#三问题总结管理)
4. [版本管理机制](#四版本管理机制)
5. [测试机制](#五测试机制)
6. [后端联调规范](#六后端联调规范)
7. [文档更新记录](#文档更新记录)

---

## 一、模块化开发机制

### 1.1 模块拆分原则

项目按照**自底向上**的方式开发：先拆分最小功能单元，逐个完成，最后连接。

```
页面 → 功能模块 → 组件 → 接口
(大)              (小)
```

### 1.2 模块定义模板

每个模块在开发前必须填写以下信息：

```markdown
## [模块名称]

**所属页面**: [首页/服务/社区/我的]
**优先级**: [P0核心/P1重要/P2一般]
**开发者**: [姓名]
**预计工时**: [小时/天]

### 模块描述
[简要描述这个模块的功能]

### 功能拆分
- [ ] 子功能1
- [ ] 子功能2
- [ ] 子功能3

### 依赖关系
- 前置依赖: [需要先完成什么]
- 被依赖: [谁依赖我]

### 验收标准
- [ ] [具体标准1]
- [ ] [具体标准2]

### 涉及接口
- [ ] 接口1: [用途] | [方法]
- [ ] 接口2: [用途] | [方法]
```

### 1.3 宠物APP模块清单

#### 首页模块
| 模块ID | 模块名称 | 优先级 | 状态 |
|--------|----------|--------|------|
| H-01 | 宠物切换卡片 | P0 | 待开发 |
| H-02 | 今日提醒卡片 | P0 | 待开发 |
| H-03 | AI问诊入口 | P0 | 待开发 |
| H-04 | 快捷功能网格 | P1 | 待开发 |
| H-05 | 每日签到 | P1 | 待开发 |
| H-06 | 推荐内容预览 | P2 | 待开发 |

#### 服务模块
| 模块ID | 模块名称 | 优先级 | 状态 |
|--------|----------|--------|------|
| S-01 | AI健康问诊 | P0 | 待开发 |
| S-02 | 在线问诊列表 | P0 | 待开发 |
| S-03 | 附近医院地图 | P1 | 待开发 |
| S-04 | 轻量商城入口 | P1 | 待开发 |
| S-05 | 宠物日历管理 | P0 | 待开发 |
| S-06 | 会员权益中心 | P1 | 待开发 |

#### 社区模块
| 模块ID | 模块名称 | 优先级 | 状态 |
|--------|----------|--------|------|
| C-01 | 内容瀑布流 | P0 | 待开发 |
| C-02 | 发帖功能 | P0 | 待开发 |
| C-03 | 话题标签 | P1 | 待开发 |
| C-04 | 评论互动 | P1 | 待开发 |
| C-05 | 每日签到领宠豆 | P1 | 待开发 |

#### 我的模块
| 模块ID | 模块名称 | 优先级 | 状态 |
|--------|----------|--------|------|
| M-01 | 个人信息头部 | P0 | 待开发 |
| M-02 | 我的宠物列表 | P0 | 待开发 |
| M-03 | 宠豆余额展示 | P0 | 待开发 |
| M-04 | 订单列表 | P1 | 待开发 |
| M-05 | 问诊记录 | P1 | 待开发 |
| M-06 | 设置页面 | P2 | 待开发 |

### 1.4 开发流程

```
1. 创建模块目录
   └── /pages/home/components/pet-card/

2. 填写模块定义 (在本文档中追加)

3. 开发组件/页面

4. 自测 (本地运行)

5. 提交审查

6. 审查通过 → 合入主分支

7. 审查不通过 → 记录问题 → 修改 → 重新提交
```

---

## 二、开发审查机制

### 2.1 审查流程

```
开发完成 → 自测 → 提交审查 → 审查者核对
                              ↓
                        通过 → 打卡完成
                        不通过 → 打回 → 记录问题 → 修改
```

### 2.2 审查检查清单

#### 2.2.1 功能审查
- [ ] 功能符合产品决策文档要求
- [ ] 功能符合模块定义的验收标准
- [ ] 边界情况处理正确
- [ ] 交互体验符合设计要求

#### 2.2.2 代码审查
- [ ] 代码符合 uni-app x 规范
- [ ] 使用 uts 强类型，无弱类型 js
- [ ] 样式仅使用 class 选择器
- [ ] 文字使用 `<text>` 组件
- [ ] 需要滚动时使用 `scroll-view`
- [ ] 代码有适当注释

#### 2.2.3 接口审查
- [ ] 接口调用有错误处理
- [ ] 接口注释完整（用途、参数、返回值）
- [ ] 加载状态处理
- [ ] 网络异常处理

#### 2.2.4 商业审查
- [ ] 付费功能入口突出
- [ ] AI问诊等核心功能醒目
- [ ] 粘性设计到位（签到、互动等）

### 2.3 审查记录模板

```markdown
## 审查记录 [模块ID] - [日期]

**模块**: [模块名称]
**开发者**: [姓名]
**审查者**: [姓名]
**审查结果**: ✅通过 / ❌不通过

### 审查意见
#### 功能方面
- [问题/建议]

#### 代码方面
- [问题/建议]

#### 接口方面
- [问题/建议]

### 处理要求
- [ ] 修改点1
- [ ] 修改点2
- [ ] 修改点3

### 重新审查日期: [日期]
```

### 2.4 审查状态标识

| 状态 | 标识 | 说明 |
|------|------|------|
| 待开发 | 📋 | 模块已定义，未开始 |
| 开发中 | 🔨 | 正在开发 |
| 待审查 | 👀 | 开发完成，等待审查 |
| 审查不通过 | ❌ | 需要修改 |
| 审查通过 | ✅ | 可以合入 |
| 已合入 | ✅ | 已完成 |

---

## 三、问题总结管理

### 3.1 问题总结文件

项目根目录创建 `issues-log.md`，记录所有开发过程中的问题和解决方案。

**文件路径**: `项目根目录/issues-log.md`

### 3.2 问题记录模板

```markdown
## 问题-[编号] [问题简述]

**日期**: [YYYY-MM-DD]
**模块**: [模块ID/模块名称]
**发现者**: [姓名]
**状态**: [待解决/已解决]

### 问题描述
[详细描述问题]

### 问题类型
- [ ] 功能问题
- [ ] 代码问题
- [ ] 接口问题
- [ ] 样式问题
- [ ] 性能问题
- [ ] 兼容性问题
- [ ] 其他

### 复现步骤
1. [步骤1]
2. [步骤2]
3. [步骤3]

### 解决方案
[详细描述解决方案]

### 涉及文件
- [ ] 文件路径1
- [ ] 文件路径2

### 相关代码
```代码片段
```

### 预防措施
[如何避免类似问题再次发生]

### 解决日期: [YYYY-MM-DD]
```

### 3.3 问题优先级

| 优先级 | 标识 | 响应时间 |
|--------|------|----------|
| P0-紧急 | 🔴 | 立即处理 |
| P1-高 | 🟠 | 当日处理 |
| P2-中 | 🟡 | 3日内 |
| P3-低 | 🟢 | 排期处理 |

### 3.4 问题回顾机制

- **每日站会**: 快速同步新增问题
- **每周回顾**: 复习本周问题和解决方案
- **开发前检查**: 遇到问题优先搜索 `issues-log.md`

---

## 四、版本管理机制

### 4.1 版本号规则

采用 **语义化版本 (Semantic Versioning)** 规范：

```
主版本号.次版本号.修订号
  ↑        ↑        ↑
  |        |        |
大改动    新增/删减  小修复/优化
```

| 变更类型 | 版本变化示例 | 说明 |
|----------|--------------|------|
| 初始版本 | 0.0.1 | 项目第一个可运行版本 |
| 小修复/优化 | 0.0.1 → 0.0.2 | bug修复、小调整 |
| 新增功能/删减功能 | 0.0.2 → 0.1.0 | 新增或删除模块 |
| 重大变更 | 0.1.0 → 1.0.0 | MVP完成或架构调整 |

### 4.2 版本状态

| 状态 | 标识 | 说明 |
|------|------|------|
| 开发中 | Dev | 正在开发的版本 |
| 暂定稿 | RC | Release Candidate，待测试 |
| 正式版 | Release | 测试通过的正式版本 |

### 4.3 版本发布流程

```
1. 开发完成 → 版本号: vX.X.X-dev
2. 功能冻结 → 版本号: vX.X.X-rc1
3. 测试通过 → 版本号: vX.X.X
4. 测试不通过 → 修复 → rc2 / rc3...
5. 正式发布 → 打 tag: vX.X.X
```

### 4.4 版本记录模板

```markdown
## 版本 vX.X.X (YYYY-MM-DD)

### 📝 更新内容
#### 新增
- [新增功能描述]

#### 优化
- [优化内容描述]

#### 修复
- [修复问题描述]

#### 删除
- [删除功能描述]

### 📋 涉及模块
- [模块ID] [模块名称] - [变更说明]

### 🔧 技术变更
- [技术相关变更]

### ⚠️ 注意事项
- [升级/使用注意事项]
```

### 4.5 宠物APP版本规划

| 版本 | 阶段 | 预计内容 | 状态 |
|------|------|----------|------|
| 0.0.1 | 初始 | 项目框架搭建 | 计划中 |
| 0.1.0 | MVP-α | 首页基础模块 | 计划中 |
| 0.2.0 | MVP-β | 服务页基础模块 | 计划中 |
| 0.3.0 | MVP-γ | 社区页基础模块 | 计划中 |
| 0.4.0 | MVP-δ | 我的页基础模块 | 计划中 |
| 1.0.0 | MVP | 四页面联调完成 | 计划中 |

---

## 五、测试机制

### 5.1 测试触发条件

测试**不主动使用**，仅在以下情况触发：

1. **版本开发完成** - 由项目负责人确认后触发
2. **重大功能变更** - 影响核心功能时
3. **重大问题修复** - P0/P1级别问题修复后

### 5.2 测试类型

| 测试类型 | 触发条件 | 执行者 |
|----------|----------|--------|
| 功能测试 | 版本开发完成 | 测试人员/项目负责人 |
| 回归测试 | 重大问题修复后 | 测试人员 |
| 兼容性测试 | 版本发布前 | 测试人员 |

### 5.3 测试清单模板

```markdown
## 测试报告 v[X.X.X]

**测试日期**: [YYYY-MM-DD]
**测试人员**: [姓名]
**测试版本**: vX.X.X

### 功能测试
#### 首页
- [ ] 宠物切换卡片
- [ ] 今日提醒卡片
- [ ] AI问诊入口
- [ ] 快捷功能网格

#### 服务
- [ ] AI健康问诊
- [ ] 在线问诊列表
- [ ] 附近医院地图
- [ ] 轻量商城入口
- [ ] 宠物日历管理
- [ ] 会员权益中心

#### 社区
- [ ] 内容瀑布流
- [ ] 发帖功能
- [ ] 话题标签
- [ ] 评论互动
- [ ] 每日签到

#### 我的
- [ ] 个人信息头部
- [ ] 我的宠物列表
- [ ] 宠豆余额展示
- [ ] 订单列表
- [ ] 问诊记录
- [ ] 设置页面

### 发现问题
| 问题ID | 描述 | 优先级 | 状态 |
|--------|------|--------|------|
| | | | |

### 测试结论
- [ ] 通过，可以发布
- [ ] 不通过，需要修复

### 测试人员签字: ________
```

### 5.4 Bug处理流程

```
发现Bug → 记录到issues-log.md → 评估优先级
                                        ↓
                                   P0/P1 → 立即修复
                                   P2/P3 → 排期修复
                                        ↓
                                   修复完成 → 回归测试
```

---

## 六、后端联调规范

### 6.1 联调分析模板

每个模块开发前，必须分析是否需要后端联调：

```markdown
## [模块名称] 后端联调分析

**模块ID**: [模块ID]
**分析日期**: [YYYY-MM-DD]

### 需要后端接口的功能
- [功能1] - 需要接口
- [功能2] - 需要接口
- [功能3] - 不需要接口（本地实现）

### 接口清单
| 接口名称 | 用途 | 方法 | 请求参数 | 返回数据 | 状态 |
|----------|------|------|----------|----------|------|
| | | | | | |

### 数据传递说明
[详细说明数据传递格式和规则]

### Mock数据方案
[在接口未就绪时，使用Mock数据的方案]
```

### 6.2 接口注释规范

所有接口调用代码必须包含完整注释：

```typescript
/**
 * 接口: 获取宠物列表
 * 用途: 获取用户的所有宠物信息
 * 方法: GET
 * 路径: /api/pet/list
 *
 * @请求参数:
 *   - userId: string - 用户ID
 *
 * @返回数据:
 *   - code: number - 状态码，200表示成功
 *   - data: Pet[] - 宠物列表
 *     - id: string - 宠物ID
 *     - name: string - 宠物名称
 *     - avatar: string - 头像URL
 *     - breed: string - 品种
 *     - age: number - 年龄
 *
 * @错误码:
 *   - 401: 未登录
 *   - 403: 无权限
 *   - 500: 服务器错误
 *
 * @联调状态: ✅已联调 / 🔄联调中 / ⏳待联调
 * @最后更新: 2026-01-27
 */
async function getPetList(userId: string): Promise<Pet[]> {
  // 实现代码
}
```

### 6.3 联调状态管理

| 状态 | 标识 | 说明 |
|------|------|------|
| 无需联调 | ➖ | 纯前端功能 |
| 待联调 | ⏳ | 前端完成，等后端接口 |
| 联调中 | 🔄 | 正在联调 |
| 联调完成 | ✅ | 联调通过 |
| 联调问题 | ❌ | 存在问题，待解决 |

### 6.4 Mock数据规范

接口未就绪时，使用Mock数据进行开发：

```typescript
// Mock数据标识
const USE_MOCK = true; // 联调完成后改为false

/**
 * Mock数据说明
 * - 数据结构与真实接口保持一致
 * - 联调完成后删除此段代码
 */
const MOCK_PET_LIST: Pet[] = [
  {
    id: "mock_001",
    name: "旺财",
    avatar: "/static/mock/dog1.png",
    breed: "金毛",
    age: 2
  }
];

async function getPetList(userId: string): Promise<Pet[]> {
  if (USE_MOCK) {
    return MOCK_PET_LIST;
  }
  // 真实接口调用
}
```

---

## 七、开发工作流总结

```
┌─────────────────────────────────────────────────────────────┐
│                      项目开发工作流                            │
└─────────────────────────────────────────────────────────────┘

1. 模块定义
   └── 填写模块定义模板
   └── 分析后端联调需求
   └── 确定验收标准

2. 开发阶段
   └── 编写代码
   └── 接口联调（使用Mock先行）
   └── 本地自测
   └── 添加接口注释

3. 审查阶段
   └── 提交审查
   └── 审查者核对检查清单
   └── 通过 → 进入下一阶段
   └── 不通过 → 记录问题 → 修改 → 重新提交

4. 问题处理
   └── 记录到 issues-log.md
   └── 解决问题
   └── 更新问题状态

5. 版本管理
   └── 小修 → 修订号+1
   └── 新增/删减 → 次版本号+1
   └── 重大变更 → 主版本号+1

6. 测试阶段
   └── 版本开发完成 → 触发测试
   └── 执行测试清单
   └── 发现问题 → 记录 → 修复 → 回归测试
   └── 测试通过 → 版本发布
```

---

## 八、文档更新记录

| 版本 | 日期 | 更新内容 | 更新人 |
|------|------|----------|--------|
| 1.0.0 | 2026-01-27 | 初始版本，建立完整开发规范 | 项目负责人 |

---

## 附录：快速参考

### A. 文件结构

```
项目根目录/
├── issues-log.md           # 问题总结文件（重要！）
├── rule.md                 # 本规范文档
├── version-history.md      # 版本历史记录
├── pages/
│   ├── home/
│   │   └── components/
│   │       └── [模块-]/
│   ├── service/
│   ├── community/
│   └── mine/
└── api/
    └── [接口文件].uts       # 包含完整接口注释
```

### B. 开发前检查清单

- [ ] 已阅读本文档相关章节
- [ ] 已搜索 `issues-log.md` 是否有类似问题
- [ ] 已填写模块定义
- [ ] 已分析后端联调需求
- [ ] 已确认验收标准

### C. 开发完成检查清单

- [ ] 代码符合 uni-app x 规范
- [ ] 接口有完整注释
- [ ] 本地自测通过
- [ ] 已提交审查

---

*本文档是活的文档，随着项目推进持续更新完善。*
